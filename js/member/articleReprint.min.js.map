{"version":3,"sources":["member/articleReprint.min.js"],"names":["articleReprintController","publish","self","id","getQuery","openId","$","cookie","agentId","document","title","setTimeout","window","yfykLink","env","click","attr","text","request","apiUrl","member","articlePreview","successCallback","data","location","href","errorCallback","err","exceptionCallback","name","reg","RegExp","r","search","substr","match","unescape","Controller","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKOA,wB;;;AACH,wCAAa;AAAA;;AAAA;;AAET,cAAKC,OAAL;AAFS;AAGZ;AACD;;;;;;;kCAGS;AACL,gBAAIC,OAAK,IAAT;AACA,gBAAIC,KAAG,KAAKC,QAAL,CAAc,IAAd,CAAP;AACA,gBAAIC,SAAOC,EAAEC,MAAF,CAAS,QAAT,CAAX;AACA,gBAAIC,UAAQF,EAAEC,MAAF,CAAS,SAAT,KAAqB,MAAjC;AACAE,qBAASC,KAAT,GAAe,MAAf;AACAC,uBAAW,YAAU;AACjBC,uBAAOH,QAAP,CAAgBC,KAAhB,GAAsB,MAAtB;AACH,aAFD,EAEE,IAFF;AAGA,gBAAIG,WAAS,EAAb;AACA,gBAAIC,MAAIR,EAAEC,MAAF,CAAS,KAAT,KAAiB,KAAzB;AACA,oBAAOO,GAAP;AACI,qBAAK,KAAL;AACID,+BAAS,gBAAT;AACA;AACJ,qBAAK,MAAL;AACIA,+BAAS,eAAT;AACA;AACJ,qBAAK,KAAL;AACIA,+BAAS,cAAT;AACA;AACJ,qBAAK,MAAL;AACIA,+BAAS,oBAAT;AACA;AAZR,aAaC;AACDP,cAAE,eAAF,EAAmBS,KAAnB,CAAyB,YAAU;AAC/BT,kBAAE,IAAF,EAAQU,IAAR,CAAa,UAAb,EAAwB,IAAxB;AACA,oBAAIN,QAAMJ,EAAE,gBAAF,EAAoBW,IAApB,EAAV;AACAf,qBAAKgB,OAAL,CAAahB,KAAKiB,MAAL,CAAYC,MAAZ,CAAmBC,cAAhC,EAA+C,EAAClB,MAAD,EAAIE,cAAJ,EAAWK,YAAX,EAA/C,EAAiE;AAC7D;AACAY,qCAAgB,yBAASC,IAAT,EAAc;AAC1BC,iCAASC,IAAT,GAAcZ,WAAS,gCAAT,GAA0CR,MAA1C,GAAiD,MAAjD,GAAwDF,EAAxD,GAA2D,WAA3D,GAAuEK,OAAvE,GAA+E,cAA7F;AACH,qBAJ4D;AAK7DkB,mCAAc,uBAASC,GAAT,EAAa;AACvBrB,0BAAE,eAAF,EAAmBU,IAAnB,CAAwB,UAAxB,EAAmC,KAAnC;AACH,qBAP4D;AAQ7DY,uCAAkB,2BAASL,IAAT,EAAc;AAC5BjB,0BAAE,eAAF,EAAmBU,IAAnB,CAAwB,UAAxB,EAAmC,KAAnC;AACH;AAV4D,iBAAjE;AAYH,aAfD;AAgBH;;;iCACQa,I,EAAK;AACX,gBAAIC,MAAM,IAAIC,MAAJ,CAAW,UAASF,IAAT,GAAe,eAA1B,CAAV;AACC,gBAAIG,IAAIpB,OAAOY,QAAP,CAAgBS,MAAhB,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,KAAjC,CAAuCL,GAAvC,CAAR,CAFU,CAE0C;AACpD,gBAAIE,KAAG,IAAP,EAAa,OAAOI,SAASJ,EAAE,CAAF,CAAT,CAAP,CAAuB,OAAO,IAAP;AACvC;;;;EAtDmCK,U;;AAuDtC;AACD;;;AAGD/B,EAAEG,QAAF,EAAY6B,KAAZ,CAAkB,YAAU;AACxB,QAAItC,wBAAJ;AACH,CAFD","file":"articleReprint.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：有房有客微信CDN框架\n 2. 页面名称：articleReprint.js (发布文章页)\n 3. 作者：douyadong@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class articleReprintController extends Controller {\n    constructor(){\n        super();\n        this.publish();\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    修改文章标题\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    publish(){\n        let self=this;\n        let id=this.getQuery('id');\n        let openId=$.cookie('openId');\n        let agentId=$.cookie('agentId')||100638;\n        document.title=\"转载文章\";\n        setTimeout(function(){\n            window.document.title=\"转载文章\";\n        },2000);\n        let yfykLink='';\n        let env=$.cookie('env')||'dev';\n        switch(env){\n            case \"dev\" :\n                yfykLink=\"localhost:8080\" ;\n                break;\n            case \"test\" :\n                yfykLink=\"//m.test.wkzf\" ;\n                break ;\n            case \"sim\" :\n                yfykLink=\"//m.sim.wkzf\" ;\n                break ;\n            case \"prod\" :\n                yfykLink=\"https://m.wkzf.com\" ;\n                break ;\n        };\n        $('.publish .btn').click(function(){\n            $(this).attr('disabled',true);\n            let title=$('ul .edit-title').text();\n            self.request(self.apiUrl.member.articlePreview,{id,openId,title},{\n                //type:\"POST\",\n                successCallback:function(data){\n                    location.href=yfykLink+\"/yfyk365/wechat/hybrid?openId=\"+openId+\"&id=\"+id+\"&agentId=\"+agentId+\"&share=false\";\n                },\n                errorCallback:function(err){\n                    $('.publish .btn').attr('disabled',false);\n                },\n                exceptionCallback:function(data){\n                    $('.publish .btn').attr('disabled',false);\n                }\n            })\n        });\n    }\n    getQuery(name){\n　      var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\n        var r = window.location.search.substr(1).match(reg);//从?之后开始匹配如getQuery(courseid)返回一个数组[\"courseid=8\",\"\",\"8\",\"&\",index:0,input:\"courseid=8\"]\n        if (r!=null) return unescape(r[2]); return null;\n    }\n };\n /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function(){\n    new articleReprintController ;\n}) ;"]}