/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：有房有客微信CDN框架
 2. 页面名称：index.js (首页)
 3. 作者：zhaohuagang@lifang.com
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
 class  IndexController extends Controller {
    constructor() {
        super() ;
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        图片懒加载实例化
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        
        $(".lazy").lazyload({ 
            "placeholder" : this.staticDomain + "/yf2wechat_fe/images/loading.jpg"
        }) ;
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        添加dom事件监听
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.addEventListeners() ;
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        swiper初始化
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.initSwiper() ; 
    }
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    添加dom事件监听
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    addEventListeners() {
        $("#tipsDemo").click(() => {
            $.tips("正面照与身份信息不匹配<br>请检查" , 3 , () => { alert("tips框已经关闭！惆怅不？") ; }) ;
        }) ;
        $("#modalDemo").click(() => {
            $.modal({
                "id" : "alertModalDialog" ,
                "title" : "提示信息" ,
                "content" : "你这么牛逼你妈知道吗？" ,
                "buttons" : [
                    { "text" : "确定" , "className" : "text-yfyk" , "href" : "tel:13000998899" , "clickCallback" : function(){ $.modal.close("alertModalDialog") ; } } ,
                    { "text" : "取消" , "className" : "text-wkzf" , "clickCallback" : function(){ $.modal.close("alertModalDialog") ; } }
                ]
            }) ;
        }) ;
    }
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    swiper初始化
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    initSwiper() {
        require(["../components/swiper-3.4.2.jquery.min"] , () => {            
            let tabsSwiper = new Swiper( ".tabs" , { 
                speed : 500 ,
                autoHeight : true ,
                onSlideChangeEnd : function(swiper) {
                    $(".tabs .tabs-handle li").removeClass("on") ;
                    $(".tabs .tabs-handle li").eq(swiper.activeIndex).addClass("on") ;                    
                }                
            }) ;
            $(".tabs .tabs-handle li").eq(0).addClass("on") ;
            $(".tabs .tabs-handle li").each(( index , tab ) => {
                $(tab).click(() => {
                    tabsSwiper.slideTo( index , 500 , true ) ;
                }) ;
            }) ;
        }) ;
    }
}

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
类的初始化
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function() {
    new IndexController ;
}) ;