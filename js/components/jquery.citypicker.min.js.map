{"version":3,"sources":["components/jquery.citypicker.min.js"],"names":["$","fn","citypicker","options","opts","extend","defaults","addEventListeners","each","handler","click","open","off","$selectedProvince","find","resultLabelContainerSelector","text","attr","resultValueAttr","callback","close","init","removeClass","addClass","hide","show","initLabel","initValue","selectedProvinceIndex","valArray","split","selectedProvinceId","index","province","city","eq","trigger","document","body","css","noop","jQuery"],"mappings":"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","file":"jquery.citypicker.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：有房有客微信CDN框架\n 2. 页面名称：citypicker (jQuery插件 - 城市选择)\n 3. 作者：zhaohuagang@lifang.com\n 4. 实例：\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n(function($) {\n    $.fn.citypicker = function(options) {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        将每个citypicker加上对应的配置属性\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        var opts = $.extend({}, $.fn.citypicker.defaults, options) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        将每个citypicker加上对应的配置属性\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $.fn.citypicker.addEventListeners() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n         执行事件添加后返回\n         -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        return this.each(function() {\n            var handler = this ;\n           $(this).click(function(){\n               $.fn.citypicker.open() ;\n           }) ;\n           $(\".city-picker>.city>li\").off(\"click\").click(function() {\n                var $selectedProvince = $(\".city-picker>.province>li.on\") ;\n                $(handler).find(opts.resultLabelContainerSelector).text($selectedProvince.text() + \" \" + $(this).text()) ;\n                $(handler).attr( opts.resultValueAttr , $selectedProvince.attr(\"data-id\") + \",\" + $(this).attr(\"data-id\")) ;\n                opts.callback($(this).attr(\"data-id\")) ;\n                $.fn.citypicker.close() ;\n            }) ;\n            $.fn.citypicker.init( handler , opts ) ;\n        }) ;\n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    添加事件监听\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    $.fn.citypicker.addEventListeners = function() {\n        $(\".city-picker-mask\").off(\"click\").click(function() {\n            $.fn.citypicker.close() ;\n        }) ;\n        $(\".city-picker>.province>li\").off(\"click\").click(function() {\n            $(\".city-picker>.province>li\").removeClass(\"on\") ;\n            $(this).addClass(\"on\") ;\n            $(\".city-picker>.city\").hide(100) ;\n            $(\"#cities\" + $(this).attr(\"data-id\")).show(100) ;\n        }) ;        \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    初始化，根据初始值来决定状态\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    $.fn.citypicker.init = function( handler , opts ) {\n        var initLabel = $(handler).find(opts.resultLabelContainerSelector).text() ;\n        var initValue = $(handler).attr(opts.resultValueAttr) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        如果没有初始值就显示第一个\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        var selectedProvinceIndex = 0 ;\n        if( initValue) {\n            var valArray = initValue.split(\",\") ;\n            var selectedProvinceId = valArray[0] ;\n            $(\".city-picker>.province>li\").each(function( index , province ){\n                if($(province).attr(\"data-id\") == selectedProvinceId) selectedProvinceIndex = index ;\n            }) ;\n            $(\"#cities\" + selectedProvinceId + \">li\").each(function( index , city ){\n                if($(city).attr(\"data-id\") == valArray[1]) $(city).addClass(\"on\") ;\n            }) ;\n        }\n        $(\".city-picker>.province>li\").eq(selectedProvinceIndex).trigger(\"click\") ;        \n        //$(\".city-picker>.province\").scrollTop($(\".city-picker>.province>li\").eq(selectedProvinceIndex).offset().top) ;\n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    打开城市选择器\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    $.fn.citypicker.open = function() {\n        $(document.body).css({ \"overflow\" : \"hidden\" }) ;\n        $(\".city-picker-mask,.city-picker\").show(100) ;        \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   关闭城市选择器\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    $.fn.citypicker.close = function() {\n        $(document.body).css({ \"overflow\" : \"auto\" }) ;\n        $(\".city-picker-mask,.city-picker\").hide(100) ;\n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    citypicker默认配置\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    $.fn.citypicker.defaults = {        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        选择好的城市label以后往节点下的什么选择器表达的容器下写入\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        \"resultLabelContainerSelector\" : \"dd\" ,\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        选择好的城市value往节点的什么属性下写入\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        \"resultValueAttr\" : \"data-value\" ,\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        选择好的城市的回调\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        \"callback\" : $.noop\n    } ;\n})(jQuery) ;"]}