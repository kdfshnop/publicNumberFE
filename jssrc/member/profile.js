/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：有房有客微信CDN框架
 2. 页面名称：profileEdit.js (个人资料编辑)
 3. 作者：tll
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
 class ProfileController extends Controller {
     constructor() {
        super();
        document.title = "个人资料";    // 设置标题
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        添加dom事件监听
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.addEventListeners();
     }
     addEventListeners() {
         require([
            this.appStaticPrefix + "/components/jquery.townpicker.min.js"
         ], () => {
             $('#townSelector').townpicker({
                controller: this,
                callback: (data) => {
                    let requestData = {
                        openId: $.cookie("openId"),
                        cityId: $("#cityId").val(),
                        district: JSON.stringify(data)
                    };
                    this.request( this.apiUrl.member.profileUpdate , requestData , {
                        type: "post",
                        successCallback: (data) => {
                            console.log(data)
                        }
                    }) ;
                }
            });
         })
     }
 }
 /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
类的初始化
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function(){
    new ProfileController();
})