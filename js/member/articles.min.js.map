{"version":3,"sources":["member/articles.min.js"],"names":["articleController","pullload","tips","agentId","$","cookie","openId","env","yfykLink","self","require","AsyncItem","controller","apiUrl","member","articleList","contentType","requestType","queryStringObject","traditional","pageSize","threshold","callback","data","str","each","index","item","date","Date","showTime","td","year","getFullYear","tYear","month","getMonth","tMonth","strDate","getDate","tStrDate","hours","getHours","minutes","getMinutes","currentTime","article","append","window","localStorage","getItem","addClass","click","setItem","Controller","document","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKOA,iB;;;AACF,iCAAa;AAAA;;AAAA;;AAET,cAAKC,QAAL;AACA,cAAKC,IAAL;AAHS;AAIZ;AACD;;;;;mCACU;AACP,gBAAIC,UAAQC,EAAEC,MAAF,CAAS,SAAT,KAAqB,EAAjC;AACA,gBAAIC,SAAOF,EAAEC,MAAF,CAAS,QAAT,CAAX;AACA,gBAAIE,MAAIH,EAAEC,MAAF,CAAS,KAAT,KAAiB,KAAzB;AACA,gBAAIG,WAAS,EAAb,CAJO,CAIS;AACZ,oBAAOD,GAAP;AACI,qBAAK,KAAL;AACIC,+BAAS,uBAAT;AACA;AACJ,qBAAK,MAAL;AACIA,+BAAS,eAAT;AACA;AACJ,qBAAK,KAAL;AACIA,+BAAS,cAAT;AACA;AACJ,qBAAK,MAAL;AACIA,+BAAS,oBAAT;AACA;AAZR,aAaC;AACL,gBAAIC,OAAO,IAAX;AACAC,oBAAQ,CAAC,8BAAD,CAAR,EAAyC,UAASC,SAAT,EAAmB;AACxDF,qBAAKE,SAAL,GAAiB,IAAIA,SAAJ,CAAc,EAACC,YAAYH,IAAb,EAAd,CAAjB;AACH,aAFD;AAGAL,cAAE,OAAF,EAAWH,QAAX,CAAoB;AAChBY,wBAAQ,KAAKA,MAAL,CAAYC,MAAZ,CAAmBC,WADX;AAEhBC,6BAAY,kBAFI;AAGhBC,6BAAa,MAHG;AAIhBC,mCAAmB;AACf,qCAAgB,CACZ;AACI,qCAAY,QADhB;AAEI,kCAAS,IAFb;AAGI,iCAAQZ;AAHZ,qBADY;AADD,iBAJH;AAahBa,6BAAa,IAbG;AAchBC,0BAAU,EAdM;AAehBC,2BAAW,EAfK;AAgBhBC,0BAAU,kBAAUC,IAAV,EAAgB;AACtB,wBAAIC,MAAM,EAAV;AACA,wBAAGD,KAAKA,IAAL,CAAUA,IAAb,EAAkB;AACdnB,0BAAEqB,IAAF,CAAOF,KAAKA,IAAL,CAAUA,IAAjB,EAAuB,UAACG,KAAD,EAAQC,IAAR,EAAiB;AACpCA,iCAAKnB,QAAL,GAAcA,QAAd;AACAmB,iCAAKxB,OAAL,GAAaA,OAAb;AACA;AACA,gCAAIyB,OAAK,IAAIC,IAAJ,CAASF,KAAKG,QAAd,CAAT,CAJoC,CAIH;AACjC,gCAAIC,KAAK,IAAIF,IAAJ,EAAT,CALoC,CAKhB;AACpB,gCAAIG,OAAOJ,KAAKK,WAAL,EAAX;AACA,gCAAIC,QAAQH,GAAGE,WAAH,EAAZ;AACA,gCAAIE,QAAQP,KAAKQ,QAAL,KAAkB,CAA9B;AACA,gCAAIC,SAASN,GAAGK,QAAH,KAAgB,CAA7B;AACA,gCAAIE,UAAUV,KAAKW,OAAL,EAAd;AACA,gCAAIC,WAAWT,GAAGQ,OAAH,EAAf;AACA,gCAAIE,QAAQb,KAAKc,QAAL,EAAZ;AACA,gCAAIC,UAAUf,KAAKgB,UAAL,EAAd;AACA,gCAAIT,SAAS,CAAT,IAAcA,SAAS,CAA3B,EAA8B;AAC1BA,wCAAQ,MAAMA,KAAd;AACH;AACD,gCAAIG,WAAW,CAAX,IAAgBA,WAAW,CAA/B,EAAkC;AAC9BA,0CAAU,MAAMA,OAAhB;AACH;AACD,gCAAID,UAAU,CAAV,IAAeA,UAAU,CAA7B,EAAgC;AAC5BA,yCAAS,MAAMA,MAAf;AACH;AACD,gCAAIG,YAAY,CAAZ,IAAiBA,YAAY,CAAjC,EAAoC;AAChCA,2CAAW,MAAMA,QAAjB;AACH;AACD,gCAAGG,WAAS,CAAT,IAAcA,WAAS,CAA1B,EAA4B;AACxBA,0CAAU,MAAMA,OAAhB;AACH;AACD,gCAAIE,oBAAJ;AACA,gCAAGb,QAAME,KAAN,IAAaC,SAAOE,MAApB,IAA4BC,WAASE,QAAxC,EAAiD;AAC7CK,8CAAYJ,QAAM,GAAN,GAAUE,OAAtB;AACH,6BAFD,MAEM,IAAGX,QAAME,KAAT,EAAe;AACjBW,8CAAYV,QAAM,GAAN,GAAUG,OAAV,GAAkB,GAAlB,GAAsBG,KAAtB,GAA4B,GAA5B,GAAgCE,OAA5C;AACH,6BAFK,MAED;AACDE,8CAAYb,OAAK,GAAL,GAASG,KAAT,GAAe,GAAf,GAAmBG,OAAnB,GAA2B,GAA3B,GAA+BG,KAA/B,GAAqC,GAArC,GAAyCE,OAArD;AACH;AACDhB,iCAAKkB,WAAL,GAAiBA,WAAjB;AACArB,mCAAOf,KAAKE,SAAL,CAAemC,OAAf,CAAuBnB,IAAvB,CAAP;AACH,yBAvCD;AAwCH;AACDvB,sBAAE,OAAF,EAAW2C,MAAX,CAAkBvB,GAAlB;AACH;AA7De,aAApB;AA+DH;AACD;;;;+BACM;AACF,gBAAItB,OAAK8C,OAAOC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,KAAqC,KAA9C,CADE,CACkD;AACpD,gBAAGhD,IAAH,EAAQ;AACJE,kBAAE,OAAF,EAAW+C,QAAX,CAAoB,MAApB;AACH;AACD/C,cAAE,aAAF,EAAiBgD,KAAjB,CAAuB,YAAU;AAC7BlD,uBAAK8C,OAAOC,YAAP,CAAoBI,OAApB,CAA4B,MAA5B,EAAmC,MAAnC,CAAL;AACH,aAFD;AAGH;;;;EAvG4BC,U;;AAwG/B;AACD;;;AAGDlD,EAAEmD,QAAF,EAAYC,KAAZ,CAAkB,YAAU;AACxB,QAAIxD,iBAAJ;AACH,CAFD","file":"articles.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：有房有客微信CDN框架\n 2. 页面名称：article.js (文章列表页)\n 3. 作者：douyadong@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class articleController extends Controller {\n     constructor(){\n         super();\n         this.pullload();\n         this.tips();\n     }\n     // 上拉加载\n    pullload() {\n        let agentId=$.cookie('agentId')||'';\n        let openId=$.cookie('openId');\n        let env=$.cookie('env')||'dev';\n        let yfykLink=\"\";//文章预览页跳转至yfyk2h5_fe;\n            switch(env){\n                case \"dev\" :\n                    yfykLink=\"http://localhost:8080\" ;\n                    break;\n                case \"test\" :\n                    yfykLink=\"//m.test.wkzf\" ;\n                    break ;\n                case \"sim\" :\n                    yfykLink=\"//m.sim.wkzf\" ;\n                    break ;\n                case \"prod\" :\n                    yfykLink=\"https://m.wkzf.com\" ;\n                    break ;\n            };\n        let self = this;\n        require([\"../components/async-item.min\"],function(AsyncItem){\n            self.AsyncItem = new AsyncItem({controller: self});\n        });\n        $(\"#list\").pullload({\n            apiUrl: this.apiUrl.member.articleList, \n            contentType:\"application/json\",\n            requestType: \"post\",\n            queryStringObject: {\n                \"conditionList\":[\n                    {\n                        \"fieldName\":\"openId\",\n                        \"symbol\":\"eq\",\n                        \"value\":openId\n                    }\n                ]\n            },\n            traditional: true,\n            pageSize: 10,\n            threshold: 50,\n            callback: function (data) {\n                var str = '';\n                if(data.data.data){\n                    $.each(data.data.data, (index, item) => {\n                        item.yfykLink=yfykLink;\n                        item.agentId=agentId;\n                        // 处理日期格式化;\n                        let date=new Date(item.showTime);//根据返回时间戳获取时间,日期;\n                        let td = new Date();//获取当前时间的时间戳;\n                        let year = date.getFullYear();\n                        let tYear = td.getFullYear();\n                        let month = date.getMonth() + 1;\n                        let tMonth = td.getMonth() + 1;\n                        let strDate = date.getDate();\n                        let tStrDate = td.getDate();\n                        let hours = date.getHours();\n                        let minutes = date.getMinutes();\n                        if (month >= 1 && month <= 9) {\n                            month = \"0\" + month;\n                        };\n                        if (strDate >= 0 && strDate <= 9) {\n                            strDate = \"0\" + strDate;\n                        };\n                        if (tMonth >= 1 && tMonth <= 9) {\n                            tMonth = \"0\" + tMonth;\n                        };\n                        if (tStrDate >= 0 && tStrDate <= 9) {\n                            tStrDate = \"0\" + tStrDate;\n                        };\n                        if(minutes>=0 && minutes<=9){\n                            minutes = \"0\" + minutes;\n                        };\n                        let currentTime;\n                        if(year==tYear&&month==tMonth&&strDate==tStrDate){\n                            currentTime=hours+\":\"+minutes;\n                        }else if(year==tYear){\n                            currentTime=month+'-'+strDate+' '+hours+\":\"+minutes;\n                        }else{\n                            currentTime=year+'-'+month+'-'+strDate+' '+hours+\":\"+minutes;\n                        }\n                        item.currentTime=currentTime;\n                        str += self.AsyncItem.article(item);\n                    });\n                }\n                $(\"#list\").append(str);\n            }\n        })\n    }\n    // 文章采集提示框是否显示;\n    tips(){\n        let tips=window.localStorage.getItem('tips')||false;//智能采集文章提示框;\n        if(tips){\n            $('.tool').addClass('none');\n        };\n        $('.addArticle').click(function(){\n            tips=window.localStorage.setItem('tips','true');\n        })\n    }\n };\n /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function(){\n    new articleController ;\n}) ;"]}